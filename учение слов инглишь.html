<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Vocabulary Trainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #0a192f, #172a45);
      color: #e6f1ff;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    h1 {
      color: #64ffda;
      font-size: 2rem;
      margin-bottom: 15px;
    }

    select, button {
      background: #112240;
      color: #e6f1ff;
      border: 2px solid #64ffda;
      padding: 14px 24px;
      border-radius: 10px;
      cursor: pointer;
      margin: 8px;
      font-size: 1.1rem;
      transition: all 0.2s ease;
      width: auto;
      min-width: 140px;
    }

    button:hover, select:hover {
      background: #233554;
      transform: scale(1.05);
    }

    #card {
      background: #112240;
      padding: 25px;
      border-radius: 16px;
      width: 90%;
      max-width: 400px;
      margin: 25px auto;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    #word {
      font-size: 1.6rem;
      margin-bottom: 20px;
    }

    .option {
      display: block;
      margin: 10px 0;
      padding: 14px;
      border-radius: 10px;
      background: #233554;
      cursor: pointer;
      font-size: 1.1rem;
      transition: 0.25s;
    }

    .option:hover {
      background: #1f4068;
      transform: scale(1.03);
    }

    .correct {
      background: #046d4d !important;
      color: #fff;
    }

    .wrong {
      background: #7a0000 !important;
      color: #fff;
    }

    #feedback {
      font-size: 1.2rem;
      margin-top: 10px;
    }

    #editor {
      width: 95%;
      max-width: 600px;
      height: 250px;
      background: #0f213b;
      color: white;
      border: 1px solid #64ffda;
      border-radius: 10px;
      padding: 10px;
      display: none;
      margin: 0 auto;
      font-family: monospace;
      font-size: 0.95rem;
    }

    #saveBtn {
      display: none;
      margin-top: 10px;
      background: #046d4d;
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.6rem; }
      select, button {
        width: 85%;
        font-size: 1rem;
        padding: 12px;
      }
      #card {
        width: 95%;
        padding: 20px;
      }
      .option {
        font-size: 1rem;
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <h1>Vocabulary Trainer</h1>

  <div>
    <select id="groupSelect">
      <option value="1">–ì—Ä—É–ø–ø–∞ 1 (–ª—ë–≥–∫–∏–µ)</option>
      <option value="2">–ì—Ä—É–ø–ø–∞ 2 (–æ—Å–Ω–æ–≤–Ω—ã–µ)</option>
      <option value="3">–ì—Ä—É–ø–ø–∞ 3 (—Å–ª–æ–∂–Ω—ã–µ)</option>
      <option value="all">–í—Å–µ —Å–ª–æ–≤–∞</option>
    </select>
    <br>
    <button id="startBtn">üöÄ –ù–∞—á–∞—Ç—å</button>
    <button id="editBtn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
  </div>

  <div id="card" style="display:none;">
    <h2 id="word"></h2>
    <div id="options"></div>
    <p id="feedback"></p>
  </div>

  <textarea id="editor"></textarea>
  <br>
  <button id="saveBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>

  <script>
    const defaultWords = {
      1: [
        ["crucial", "–∫–ª—é—á–µ–≤–æ–π"], ["to obtain", "–ø–æ–ª—É—á–∞—Ç—å"], ["to attempt", "–ø—ã—Ç–∞—Ç—å—Å—è"],
        ["to hire", "–Ω–∞–Ω–∏–º–∞—Ç—å"], ["internal", "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π"], ["consent", "—Å–æ–≥–ª–∞—Å–∏–µ"],
        ["to gain", "–ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å"], ["fair", "—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π"], ["theft", "–∫—Ä–∞–∂–∞"],
        ["to alter", "–∏–∑–º–µ–Ω—è—Ç—å"], ["to maintain", "–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å"], ["to encourage", "–ø–æ–æ—â—Ä—è—Ç—å"],
        ["to expose", "–ø–æ–¥–≤–µ—Ä–≥–∞—Ç—å"], ["to consider", "—Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å"], ["to inspire", "–≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å"]
      ],
      2: [
        ["intermediary", "–ø–æ—Å—Ä–µ–¥–Ω–∏–∫"], ["to infiltrate", "–ø—Ä–æ–Ω–∏–∫–∞—Ç—å"], ["security alert", "–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"],
        ["to disable", "–æ—Ç–∫–ª—é—á–∞—Ç—å"], ["encryption", "—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ"], ["freeware", "—Å–≤–æ–±–æ–¥–Ω–æ–µ –ü–û"],
        ["intruder", "–≤–∑–ª–æ–º—â–∏–∫"], ["firewall", "–±—Ä–∞–Ω–¥–º–∞—É—ç—Ä"], ["malware", "–≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–µ –ü–û"],
        ["to replicate", "–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å"], ["to disguise", "–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å"], ["adware", "—Ä–µ–∫–ª–∞–º–Ω–æ–µ –ü–û"],
        ["to corrupt", "–ø–æ–≤—Ä–µ–∂–¥–∞—Ç—å"], ["to decipher", "—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å"], ["infringement copyright", "–Ω–∞—Ä—É—à–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö –ø—Ä–∞–≤"],
        ["to censor", "—Ü–µ–Ω–∑—É—Ä–∏—Ä–æ–≤–∞—Ç—å"], ["plagiarism", "–ø–ª–∞–≥–∏–∞—Ç"], ["spoofing", "–ø–æ–¥–º–µ–Ω–∞"],
        ["harassment", "–¥–æ–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤–æ"], ["abuse", "–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ"], ["exploit", "—É—è–∑–≤–∏–º–æ—Å—Ç—å"],
        ["to perpetrate", "—Å–æ–≤–µ—Ä—à–∞—Ç—å"], ["to prosecute", "–ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞—Ç—å"], ["compliant", "—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π"],
        ["to encode", "–∑–∞—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å"], ["to hack", "–≤–∑–ª–∞–º—ã–≤–∞—Ç—å"]
      ],
      3: [
        ["temporarily", "–≤—Ä–µ–º–µ–Ω–Ω–æ"], ["offensive", "–æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–π"], ["indecent", "–Ω–µ–ø—Ä–∏–ª–∏—á–Ω—ã–π"],
        ["domain", "–¥–æ–º–µ–Ω"], ["social security number", "–Ω–æ–º–µ—Ä —Å–æ—Ü—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è"], ["decryption", "—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞"],
        ["unauthorized", "–Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π"], ["to extort", "–≤—ã–º–æ–≥–∞—Ç—å"], ["denial", "–æ—Ç–∫–∞–∑"],
        ["whistle", "—Å–≤–∏—Å—Ç–æ–∫"], ["in between", "–≤ –ø—Ä–æ–º–µ–∂—É—Ç–∫–µ"], ["to make aware of", "–ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤ –∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç—å"],
        ["to high", "–Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ"]
      ]
    };

    let words = JSON.parse(localStorage.getItem("vocabWords")) || defaultWords;
    const groupSelect = document.getElementById("groupSelect");
    const startBtn = document.getElementById("startBtn");
    const editBtn = document.getElementById("editBtn");
    const saveBtn = document.getElementById("saveBtn");
    const editor = document.getElementById("editor");
    const card = document.getElementById("card");
    const wordEl = document.getElementById("word");
    const optionsDiv = document.getElementById("options");
    const feedback = document.getElementById("feedback");

    let currentList = [];
    let currentWord = null;

    function shuffle(arr){ return arr.sort(() => Math.random() - 0.5); }

    startBtn.onclick = () => {
      let g = groupSelect.value;
      currentList = g === "all" ? [...words[1],...words[2],...words[3]] : [...words[g]];
      shuffle(currentList);
      nextWord();
      card.style.display = "block";
      window.scrollTo({ top: card.offsetTop, behavior: "smooth" });
    };

    function nextWord(){
      feedback.textContent = "";
      if(currentList.length === 0){ 
        wordEl.textContent = "‚úÖ –í—Å–µ —Å–ª–æ–≤–∞ –ø—Ä–æ–π–¥–µ–Ω—ã!";
        optionsDiv.innerHTML = "";
        return;
      }
      currentWord = currentList.pop();
      wordEl.textContent = currentWord[0];

      let allWords = [...words[1], ...words[2], ...words[3]];
      let wrongOptions = shuffle(allWords.filter(w => w[1] !== currentWord[1])).slice(0,3);
      let choices = shuffle([currentWord, ...wrongOptions]);

      optionsDiv.innerHTML = "";
      choices.forEach(choice => {
        const btn = document.createElement("div");
        btn.className = "option";
        btn.textContent = choice[1];
        btn.onclick = () => checkAnswer(btn, choice);
        optionsDiv.appendChild(btn);
      });
    }

    function checkAnswer(btn, choice){
      if(choice[1] === currentWord[1]){
        btn.classList.add("correct");
        feedback.textContent = "‚úÖ –í–µ—Ä–Ω–æ!";
        setTimeout(nextWord, 800);
      } else {
        btn.classList.add("wrong");
        feedback.textContent = `‚ùå –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${currentWord[1]}`;
      }
    }

    editBtn.onclick = () => {
      editor.style.display = editor.style.display === "none" ? "block" : "none";
      saveBtn.style.display = saveBtn.style.display === "none" ? "inline-block" : "none";
      editor.value = JSON.stringify(words, null, 2);
    };

    saveBtn.onclick = () => {
      try {
        words = JSON.parse(editor.value);
        localStorage.setItem("vocabWords", JSON.stringify(words));
        alert("‚úÖ –°–ª–æ–≤–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!");
        editor.style.display = "none";
        saveBtn.style.display = "none";
      } catch {
        alert("‚ùå –û—à–∏–±–∫–∞: –ø—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç JSON");
      }
    };
  </script>
</body>
</html>
